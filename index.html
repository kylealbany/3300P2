<html>
<title>
CS 3300 Project 2
</title>

<head>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="map"></div>

<script>
var width = 1000;
var height = 500;


var projection = d3.geo.albersUsa();

var path = d3.geo.path()
	.projection(projection);

var svg = d3.select("#map").append("svg")
    .attr("width", width)
    .attr("height", height);

var g = svg.append("g");

d3.json("us.json", function(error, us) {


	svg.append("g")
	    .selectAll("path")
    	    .data(topojson.feature(us, us.objects.counties).features)
    	.enter().append("path")
        	.attr("d", path)
        	.style("fill", "cccccc")
        	.style("stroke", "888888")
        	.on('mousedown.log', countyClicked);

	svg.append("g")
	    .selectAll("path")
    	    .data(topojson.feature(us, us.objects.states).features)
    	.enter().append("path")
        	.attr("d", path)
        	.style("fill", "cccccc")
        	.style("stroke", "888888")
        	.on('mousedown.log', stateClicked);
	
});

var currentState;

function stateClicked(d) {

	if(currentState != null){
		currentState.attr("display", "initial");
	}
	
	currentState = d3.select(this);
	currentState.attr("display", "none");
}

function countyClicked(d){
	console.log(d.id);
}


</script>
</body>
</html>